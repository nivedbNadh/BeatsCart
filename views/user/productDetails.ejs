<%-include('../layouts/user/header')%>

<%-include('../layouts/user/navbar')%>
  <!-- Header part end-->
 

<section class="product_list section_padding">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
          <% breadcrumbs.forEach(function(breadcrumb, index) { %>
              <% if (index === breadcrumbs.length - 1) { %>
                  <li class="breadcrumb-item active" aria-current="page"><%= breadcrumb.name %></li>
              <% } else { %>
                  <li class="breadcrumb-item"><a href="<%= breadcrumb.url %>"><%= breadcrumb.name %></a></li>
              <% } %>
          <% }); %>
      </ol>
  </nav>

</head>
<body>
  
<!--breadcrumbs-->
 
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <div class="product-image image_zoom">

          <img id="mainProductImage" src="/uploads/<%= product[0].image[0] %>" alt="Product Image">
        </div>
      </div>
      <div class="col-md-6"> 
        <div class="product-info">
          <h1 class="product-title">Product Name: <%= product[0].name %></h1>
          <h1 id="product-id" data-id="<%= product[0].id %>"></h1>

          <p class="product-price">
            Price: <span>&#8377</span>
            <% if(finalPrice!== product[0].price){%>
              <span><%=Math.round(finalPrice)%></span>
              <!-- <del>&#8377;<%=product[0].price%></del> -->

           <% } else{%>
            <span><%=product[0].price%></span>

          <% }%>
           </p>
          <p class="product-description">Description:<%= product[0].description %></p>


          <p class="product-stock">
            <% if (product[0].quantity > 10) {%>
              <span class="text-success"> In Stock</span>
            <%} else if (product[0].quantity > 0) {%>
              <span class="text-warning">Limited Stock</span>
            <%} else { %>
              <span class="text-danger"> Out of Stock</span>

            <%} %>
          </p>
          <div class="quantity-controls">
            <a href="/addToCart/:productId">

              <button class="btn btn-primary ml-3 add-to-cart-btn">Add to Cart</button>
            </a>
            <button class="btn btn-primary ml-3 add-to-wishlist-btn">Add to Wishlist</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Small card section -->
    <div class="row other-images">
      <% for (let i = 1; i < product[0].image.length; i++) { %>
        <div class="col-md-3 col-sm-6"> 
          <div class="other-image-card">
            <!-- Added data-index attribute -->
            <img src="/uploads/<%= product[0].image[i] %>" class="card-img-top other-image" alt="Other Image" data-index="<%= i %>">
          </div>
        </div>
      <% } %>
    </div>
  </div>


  <style>
  
    /* Custom styles */
    body {
      font-family: Arial, sans-serif;
      background-color: white; 
      padding-top: 20px;
    }
    
    .product-image {
      max-width: 300px; 
      margin: 0 auto; 
      overflow: hidden; 
    }
        .product-image img {
      width: 100%; 
      height: auto; 
      display: block; 
      border: 1px solid #dee2e6; 
      border-radius: 5px; 
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
    }
    
    
    /* .product-info { */
      /* background-color: #fff;  */
      /* border: 1px solid #dee2e6;  */
      /* border-radius: 5px; */
      /* padding: 20px; */
    /* } */
    
    .product-title {
      font-size: 24px;
      font-weight: bold;
    }
    
    .product-price {
      font-size: 18px;
      color: #007bff;
    }
    
    .product-description {
      margin-top: 10px;
      color: #495057; 
    }
    
    .image_zoom{
      overflow: hidden
    }
    
    .image_zoom img{
      transform: scale(var(--zoom));
      transform-origin: var(--x) var(--y);
      transition: transform 0.3s ease;
    
    }
    .image_zoom:hover{
      cursor: zoom-in;
      --zoom:3;
    }
    .quantity-controls {
      margin-top: 20px;
    }
    
    .other-images {
      margin-top: 20px; 
    }
    
    .other-image-card {
      margin-bottom: 20px; 
    }
    
    .other-image-card img {
      width: 100%; 
      border-radius: 5px;
      border: 1px solid #dee2e6; 
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
    }
    
    
    @media (min-width: 768px) {
        .col-md-3 {
          margin-left: 112px;
            -ms-flex: 0 0 25%;
            flex: 0 0 25%;
            max-width: 10%;
        }
    }
    
    .other-images .col-md-3 {
        margin-right: -111px;
        margin-bottom: 0;
    }
    
    .other-images .col-md-3 {
      margin-bottom: 0;
    }
    
    @media screen and (max-width: 768px) {
      .product-info,
      .quantity-controls {
        margin-top: 30px;
      }
    }
    .breadcrumb {
        background-color: transparent; 
        padding: 0; 
        margin: 0; 
    }
    
    .breadcrumb .breadcrumb-item {
        font-size: 16px; 
        color: #555; 
    }
    
    .breadcrumb .breadcrumb-item a {
        color: #007bff; 
        text-decoration: none; 
        transition: color 0.3s;
    }
    
    .breadcrumb .breadcrumb-item a:hover {
        color: #0056b3;
    }
    
    .breadcrumb .breadcrumb-item.active {
        color: #000; 
              }
    </style>

 <!--::footer_part start::-->
 <footer class="footer_part">
  <div class="container">
      <div class="row justify-content-around">
          <!-- Top Products Section -->
          <div class="col-sm-6 col-lg-2">
              <div class="single_footer_part">
                  <h4 class="footer_title">Top Products</h4>
                  <ul class="list-unstyled footer_links">
                      <li><a href="#">Managed Website</a></li>
                      <li><a href="#">Manage Reputation</a></li>
                      <li><a href="#">Power Tools</a></li>
                      <li><a href="#">Marketing Service</a></li>
                  </ul>
              </div>
          </div>
          <!-- Quick Links Section -->
          <div class="col-sm-6 col-lg-2">
              <div class="single_footer_part">
                  <h4 class="footer_title">Quick Links</h4>
                  <ul class="list-unstyled footer_links">
                      <li><a href="#">Jobs</a></li>
                      <li><a href="#">Brand Assets</a></li>
                      <li><a href="#">Investor Relations</a></li>
                      <li><a href="#">Terms of Service</a></li>
                  </ul>
              </div>
          </div>
          <!-- Features Section -->
          <div class="col-sm-6 col-lg-2">
              <div class="single_footer_part">
                  <h4 class="footer_title">Features</h4>
                  <ul class="list-unstyled footer_links">
                      <li><a href="#">Jobs</a></li>
                      <li><a href="#">Brand Assets</a></li>
                      <li><a href="#">Investor Relations</a></li>
                      <li><a href="#">Terms of Service</a></li>
                  </ul>
              </div>
          </div>
          <!-- Resources Section -->
          <div class="col-sm-6 col-lg-2">
              <div class="single_footer_part">
                  <h4 class="footer_title">Resources</h4>
                  <ul class="list-unstyled footer_links">
                      <li><a href="#">Guides</a></li>
                      <li><a href="#">Research</a></li>
                      <li><a href="#">Experts</a></li>
                      <li><a href="#">Agencies</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>
  <!-- Footer Bottom Section -->
  <div class="copyright_part">
      <div class="container">
          <div class="row align-items-center">
              <!-- Social Icons -->
              <div class="col-lg-12 text-center">
                  <div class="footer_icon social_icon">
                      <ul class="list-unstyled">
                          <li><a href="#" class="single_social_icon"><i class="fab fa-facebook-f"></i></a></li>
                          <li><a href="#" class="single_social_icon"><i class="fab fa-twitter"></i></a></li>
                          <li><a href="#" class="single_social_icon"><i class="fas fa-globe"></i></a></li>
                          <li><a href="#" class="single_social_icon"><i class="fab fa-behance"></i></a></li>
                      </ul>
                  </div>
              </div>
          </div>
      </div>
  </div>
</footer>

<style>
 .footer_part {
    font-family: 'Arial', sans-serif;
    color: #fff;
    background-color: #2c2c2c;
    padding: 20px 0;
    width: 98.6vw; 
    position: absolute;
    margin-left: -73.4px;
}


.footer_part .container {
    max-width: 100%; 
    padding: 0 20px; 
}
  .footer_title {
      font-size: 14px; 
      color: #f1c40f;
      margin-bottom: 8px; 
      text-transform: uppercase;
  }
  .footer_links li {
      margin-bottom: 6px; 
  }
  .footer_links li a {
      color: #dcdcdc;
      text-decoration: none;
      transition: color 0.3s;
      font-size: 13px; 
  }
  .footer_links li a:hover {
      color: #f1c40f;
  }
  .single_footer_part {
      margin-bottom: 15px; 
  }
  .footer_icon ul {
      padding-left: 0;
      margin: 0;
  }
  .footer_icon ul li {
      display: inline-block;
      margin-right: 6px; 
  }
  .single_social_icon {
      font-size: 16px; 
      color: #fff;
      transition: color 0.3s;
  }
  .single_social_icon:hover {
      color: #f1c40f;
  }
  .copyright_part {
    background-color: #1a1a1a;
    padding: 10px 0;
    font-size: 13px;
    width: 100%; 
    position: relative;
    margin-bottom: 20px; 
}
  .footer_icon.social_icon ul {
      display: flex;
      justify-content: center;
      align-items: center;
  }
  @media (max-width: 992px) {
      .footer_part {
          padding: 15px 0;
      }
      .copyright_part {
          text-align: center;
          padding: 10px 0;
      }
  }
</style>

<!--::footer_part end::--> 
 
 
 
 
 
 
 
 

 
 <!-- jquery plugins here-->
 <script src="/userAssets/js/jquery-1.12.1.min.js"></script>
 <!-- popper js -->
 <script src="/userAssets/js/popper.min.js"></script>
 <!-- bootstrap js -->
 <script src="/userAssets/js/bootstrap.min.js"></script>
 <!-- easing js -->
 <script src="/userAssets/js/jquery.magnific-popup.js"></script>
 <!-- swiper js -->
 <script src="/userAssets/js/swiper.min.js"></script>
 <!-- swiper js -->
 <script src="/userAssets/js/masonry.pkgd.js"></script>
 <!-- particles js -->
 <script src="/userAssets/js/owl.carousel.min.js"></script>
 <script src="/userAssets/js/jquery.nice-select.min.js"></script>
 <!-- slick js -->
 <script src="/userAssets/js/slick.min.js"></script>
 <script src="/userAssets/js/jquery.counterup.min.js"></script>
 <script src="/userAssets/js/waypoints.min.js"></script>
 <script src="/userAssets/js/contact.js"></script>
 <script src="/userAssets/js/jquery.ajaxchimp.min.js"></script>
 <script src="/userAssets/js/jquery.form.js"></script>
 <script src="/userAssets/js/jquery.validate.min.js"></script>
 <script src="/userAssets/js/mail-script.js"></script>
 <!-- custom js -->
 <script src="/userAssets/js/custom.js"></script> 
</body>





<!--Start of Tawk.to Script-->
<script type="text/javascript">
 var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
 (function(){
 var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
 s1.async=true;
 s1.src='https://embed.tawk.to/6617ead31ec1082f04e14b15/1hr6mqjg1';
 s1.charset='UTF-8';
 s1.setAttribute('crossorigin','*');
 s0.parentNode.insertBefore(s1,s0);
 })();
 </script>
 <!--End of Tawk.to Script-->




</body>

</html> <!--::footer_part end::-->

</body>
</html>

<!-- Toastify CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

<!-- Toastify JS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


<script>
  document.querySelectorAll('.image_zoom').forEach(element => {
  let x, y, width, height;
  element.onmouseenter = () => {
    const size = element.getBoundingClientRect();
    x = size.x;
    y = size.y;
    width = size.width;
    height = size.height;
  };
  element.onmousemove = e => {
    const horizontal = (e.clientX - x) / width * 100;
    const vertical = (e.clientY - y) / height * 100;

    element.style.setProperty('--x', horizontal + '%');
    element.style.setProperty('--y', vertical + '%');
  };
});

document.addEventListener("DOMContentLoaded", function() {
  const mainProductImage = document.getElementById('mainProductImage');

  const otherImages = document.querySelectorAll('.other-image');
  otherImages.forEach(function(image) {
    image.addEventListener('click', function() {
      mainProductImage.src = this.src;
    });
  });
});



  
</script>
<script>
  document.querySelector('.add-to-cart-btn').addEventListener('click', function() {
    const productId = document.getElementById('product-id').dataset.id;

    fetch('/addToCart/' + productId, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => {
      console.log('Response received:', response);
      if (!response.ok) {
        throw new Error('Network response was not ok ' + response.statusText);
        
      }
      return response.json();
    })
    .then(data => {
      // Redirect to the same page
      window.location.href = window.location.href; // this will reload the page
     

  })
    .catch(error => {
      console.error('Error adding product to cart:', error);
    });
  });
</script>
<script>

// product add to wishlist
document.querySelector('.add-to-wishlist-btn').addEventListener('click',function(){
  const productId=document.getElementById('product-id').dataset.id
  // console.log('productId',productId)

fetch('/addToWishlist/'+productId,{
  method:'POST',
  headers:{
    'Content-Type':'application/json'
  }
})
.then(response=>{
  if(!response.ok) {
    throw new Error('Network response was not ok' +response.statusText)
  }
  
  return response.json()
})
.then(data=>{
  console.log('success',data)

  // change button text to go to wish list

  const WishlistBtn=document.querySelector('.add-to-wishlist-btn')
  WishlistBtn.textContent='Go to Wishlist'

  // updating button function to redirect wishlist page 

  WishlistBtn.addEventListener('click',function(){
    window.location.href='/wishlist'
  })


// showing success message
  Toastify({
                text: "Product add to Wishlist",
                duration: 3000,
                close: true,
                gravity: "top",
                position: 'center',
                backgroundColor: "green",
            }).showToast();})
.catch(error=>{
  console.error('Error adding product to wishlist:',error)
})


})

</script>